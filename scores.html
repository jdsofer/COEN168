<!DOCTYPE html>
<hmtl lang="en">
	<head>
		<meta charset="utf-8">
		<title> Scatter Bag </title>
		<link rel="stylesheet" type="text/css" href="/css/styles.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script>
			var Scores = {

				scores: [],		//list of score entries
				highest: 0,		//highest player score
				listSize: 10,	//max size of the leaderboard

				getScores: function(){
					var self = this;
					$.ajax({
						url: 'http://52.33.222.116/lab8/scores/index.php',
						method: 'GET',
					}).done (function(result){
							self.scores = result.scores;
							self.updateList();
					});
				},
				updateList: function () {
					var scores = this.scores,
						size = ((scores.length < this.listSize) ? scores.length : this.listSize),
						list = $('ol'),
						string = '';
					list.html('');
					if(size == 0){
						string = '<span style="text-align:center">There are no scores stored to show, good luck playing the game!</span>';
						list.append(string);
					}
					for(var i = 0; i < size; i++)
					{
						string = scores[i].name+" - "+scores[i].score;
						list.append('<li>'+string+'</li>');
						this.highest = ((scores[i].score > this.highest) ? scores[i].score : this.highest);
						console.log(this.highest);
					}	
				},			
				addEntry: function(value) {
					var player = window.prompt("Enter your name for the leaderboard", "Leeroy Jenkins"),
						toInsert = { 
							"name": player,
							"score": value
						};
					console.log(player, value);
					$.ajax({
						method: 'POST',
						url: 'http://52.33.222.116/lab8/scores/index.php',
						dataType: 'json',
						success: function(result){alert(result)},
						error: function(error){alert("This is an error "+JSON.stringify(error))},
						data: toInsert
					});
				}
			};
			Scores.getScores();
		</script>
	</head>
	<body>
		<div class="animate">
			<h1> Scatter Bag </h1>
			<h2> High Scores </h2>
			<ol></ol>
			<h3 id="return"><a href="menu.html"> Main Menu </a></h3>
		</div>
	</body>
</html>	
<script>//Scores.addEntry(1);</script>
